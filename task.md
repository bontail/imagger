### **Задание на вакансию Python-разработчика** 

### **Описание задания**

#### **1. Веб-API**

Реализуйте REST API с использованием Django или FastAPI для следующих
операций над изображениями:

-   **Загрузка нового изображения**

-   **Получение списка всех загруженных изображений**

-   **Получение информации о конкретном изображении по id**

-   **Обновление информации об изображении (например, имени или тегов)**

-   **Удаление изображения**

##### **Модель изображения должна содержать следующие поля:**

-   **id** (автоматически генерируется)

-   **название** (строка)

-   **путь к файлу** (строка)

-   **дата загрузки** (дата)

-   **разрешение** (строка)

-   **размер** (число)

#### **2. Обработка изображений**

При загрузке нового изображения выполните следующие операции:

-   Измените размер изображения до нескольких предопределённых размеров (например, 100x100, 500x500).

-   Преобразуйте изображение в оттенки серого.

-   Сохраните метаданные изображения (размер, формат, разрешение и т.д.).

#### **3. Аутентификация**

Реализуйте аутентификацию пользователей с помощью **JWT** или
**OAuth2**.

-   Только аутентифицированные пользователи могут выполнять CRUD-операции.

#### **4. База данных**

Используйте **PostgreSQL** или **MySQL** для хранения данных.

-   Настройте миграции базы данных с помощью **alembic** (для FastAPI) или встроенных средств Django.

#### **5. Брокер сообщений**

Настройте **брокер сообщений** (RabbitMQ или Kafka) для передачи
сообщений о событиях, связанных с изображениями, другим сервисам.

-   При загрузке, обновлении или удалении изображения через REST API:

    -   Отправляйте соответствующее сообщение в брокер.

-   Сервис обработки изображений должен:

    -   Слушать эти сообщения.

    -   Записывать лог о пришедшем сообщении и выводить его в консоль.

#### **6. Docker**

Подготовьте файлы для контейнеризации проекта:

-   **Dockerfile** для каждого сервиса (веб-приложение, сервис обработки изображений).

-   **docker-compose.yml** для оркестрации сервисов:

    -   Веб-приложение

    -   Сервис обработки изображений

    -   База данных

    -   Брокер сообщений

#### **7. Тестирование**

Напишите **unit-тесты** для основных функций веб-приложения и сервиса
обработки изображений.

-   Покрыть тестами функциональность загрузки, преобразования и удаления изображений.

#### **8. Документация**

-   Для **веб-API**: используйте **Swagger/OpenAPI** для автоматической генерации документации.

### **Требования к решению**

-   Код должен быть чистым, читабельным и соответствовать стандартам **PEP 8**.

-   Используйте виртуальное окружение и предоставьте файл **requirements.txt** для управления зависимостями.

-   Реализуйте корректную обработку ошибок и исключений.

-   Проект должен запускаться в контейнерах через **docker-compose**.

-   Предоставьте **README.md** с инструкциями по запуску проекта.

### **Дополнительные задания (необязательно, но будет плюсом)**

1.  **Реализуйте декоратор \@retry**

    -   **Описание:** Декоратор должен повторять вызов функции при возникновении определённых исключений.

    -   **Параметры:** times (количество повторов, по умолчанию 3), delay (задержка между повторами в секундах, по умолчанию 1), exceptions (кортеж исключений, при возникновении которых следует повторить вызов, по умолчанию Exception).

    -   **Применение:** Используйте этот декоратор для функций взаимодействия с базой данных или внешними сервисами.

2.  **Создайте асинхронную версию API**

    -   **Описание:** Реализуйте один из эндпоинтов API с использованием асинхронной функции.

    -   **Требование:** Используйте asyncio и убедитесь, что асинхронная версия работает корректно в общем контексте приложения.

3.  **Напишите сложные тесты**

    -   **Описание:** Добавьте параметризованные тесты для ваших функций, покрывая как можно больше граничных случаев.

    -   **Требование:** Используйте pytest и включите в тесты проверки на исключения и ошибки.

4.  **Кэширование**

    -   **Описание:** Реализуйте кэширование с помощью **Redis** для ускорения получения изображений.

### **Ожидаемый результат**

-   **Репозиторий с исходным кодом** (GitHub, GitLab и т.д.).

-   **Подробные инструкции** по запуску в README.md.

-   **Краткое описание архитектуры** и принятых решений.

### **Как будут оцениваться работы**

1.  Глубина понимания и правильность использования выбранного фреймворка
    > (Django или FastAPI).

2.  Умение работать с базами данных.

3.  Использование брокера сообщений для коммуникации между сервисами.

4.  Качество кода и структура проекта.

5.  Наличие тестов и документации.

6.  Выполнение дополнительных заданий будет преимуществом.
